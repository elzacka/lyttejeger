{
  "permissions": {
    "allow": [
      "SlashCommand(/claudisms-review)",
      "Bash(npm test:*)",
      "Bash(npm run build:*)",
      "Bash(git checkout:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nrefactor: Extract formatDate utilities to shared module\n\n- Add formatDate, formatDateLong, formatDateShort to utils/search.ts\n- Remove duplicate formatDate functions from EpisodeCard, EpisodeModal, PodcastModal\n- Use appropriate format variant per context (relative for cards, full for modals)\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nrefactor: Remove console.log/error statements\n\n- Remove console.error from useSearch.ts, App.tsx, PodcastModal.tsx\n- Remove console.warn from podcastIndex.ts\n- Replace with silent error handling or empty catch blocks\n- Errors are still shown to users via UI error states\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(npm install:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nrefactor: Remove dead code and fuse.js dependency\n\n- Remove unused Fuse.js-based local search functions (searchPodcasts, \n  searchEpisodes, filterPodcasts, searchAll, matchesWildcard)\n- Remove unused utilities (debounce, textContains*, WildcardTerm)\n- Remove fuse.js from dependencies (~380KB saved)\n- Simplify parseSearchQuery (removed wildcard support, only API uses it)\n- Keep only used exports: parseSearchQuery, EpisodeWithPodcast, formatters\n\nsearch.ts: 498 lines -> 126 lines\n\n Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit:*)",
      "Bash(npm run lint:*)",
      "Bash(git merge:*)",
      "Bash(git push:*)",
      "Bash(git worktree:*)",
      "Bash(git pull:*)",
      "Bash(find:*)",
      "Bash(wc:*)",
      "Bash(ls:*)",
      "Bash(curl:*)",
      "Bash(cat:*)",
      "Bash(node -e:*)",
      "Bash(brew list:*)",
      "Bash(git stash:*)",
      "Bash(npx tsc:*)",
      "Bash(git branch:*)",
      "Bash(git rm:*)",
      "Bash(npm run dev:*)",
      "Bash(git mv:*)",
      "Bash(git show:*)",
      "Bash(grep:*)",
      "Skill(review)",
      "Skill(review:*)",
      "Bash(cloc:*)",
      "Bash(rsync:*)",
      "Bash(git clone:*)",
      "Bash(/Users/lene/dev/designsystem/apps/lyttejeger/src/ )",
      "Bash(/Users/lene/dev/lyttejeger/src/)",
      "Bash(/Users/lene/dev/designsystem/apps/lyttejeger/public/ )",
      "Bash(/Users/lene/dev/lyttejeger/public/)",
      "Bash(git ls-tree:*)",
      "Bash(pnpm build:*)",
      "Bash(pnpm --filter lyttejeger build:*)",
      "Bash(gh run list:*)",
      "Bash(echo:*)",
      "Bash(gh issue create --title \"feat: Add overlay components \\(Dropdown, Tooltip, Popover\\)\" --body \"$\\(cat <<''EOF''\n## Background\n\nSeveral apps in the monorepo have implemented inline dropdown menus and tooltips that suffer from common positioning issues:\n\n1. **Z-index problems**: Dropdown menus hidden behind sibling elements in lists \\(especially virtualized lists\\)\n2. **Viewport overflow**: Menus positioned outside visible viewport on mobile\n3. **Stacking context isolation**: CSS Modules create separate stacking contexts, making cross-component z-index coordination difficult\n\n### Current workarounds in Lyttejeger\n\n- `data-menu-open` attributes for CSS `:has\\(\\)` selectors across module boundaries\n- Manual viewport collision detection in JavaScript\n- Hardcoded `max-width` constraints\n\nThese workarounds are fragile and don''t scale across apps.\n\n## Proposed Solution\n\nAdd three overlay primitives to `@designsystem/core`:\n\n### 1. Popover \\(base primitive\\)\n\nCore positioning logic shared by Dropdown and Tooltip:\n\n- **Portal rendering**: Render to `document.body` to escape stacking contexts\n- **Collision detection**: Auto-flip when hitting viewport edges\n- **Anchor positioning**: CSS Anchor Positioning API with JS fallback\n- **Focus management**: Trap focus, return focus on close\n- **Dismiss handling**: Click outside, Escape key, scroll\n\n### 2. Dropdown / Menu\n\nFor action menus \\(three-dot menus, context menus\\):\n\n```tsx\n<Dropdown>\n  <Dropdown.Trigger>\n    <Button icon={<MoreVerticalIcon />} />\n  </Dropdown.Trigger>\n  <Dropdown.Content>\n    <Dropdown.Item onSelect={handlePlayNext}>Spill neste</Dropdown.Item>\n    <Dropdown.Item onSelect={handleAddToQueue}>Legg til i k繪</Dropdown.Item>\n  </Dropdown.Content>\n</Dropdown>\n```\n\nFeatures:\n- Keyboard navigation \\(Arrow keys, Home/End\\)\n- ARIA `role=\"menu\"` / `role=\"menuitem\"`\n- Typeahead selection\n\n### 3. Tooltip\n\nFor hover/focus hints:\n\n```tsx\n<Tooltip content=\"Legg til i k繪\">\n  <Button icon={<ListPlusIcon />} />\n</Tooltip>\n```\n\nFeatures:\n- Delay before show/hide\n- Arrow pointing to trigger\n- ARIA `role=\"tooltip\"` with `aria-describedby`\n\n## Technical Considerations\n\n- **CSS Anchor Positioning**: Use native API where supported \\(Chrome 125+\\), with JavaScript fallback\n- **Animation**: CSS `@starting-style` for enter animations, discrete `display` transitions\n- **Touch devices**: Longer press delay, larger tap targets\n- **SSR**: Handle `document.body` portal gracefully\n\n## References\n\n- [Radix UI Primitives]\\(https://www.radix-ui.com/primitives\\) - Headless implementation reference\n- [Floating UI]\\(https://floating-ui.com/\\) - Positioning algorithm reference\n- [CSS Anchor Positioning]\\(https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_anchor_positioning\\) - Native API spec\n\n## Affected Apps\n\n- **Lyttejeger**: EpisodeCard menu, filter dropdowns\n- **Storybook**: Tooltip positioning in component demos\nEOF\n\\)\")",
      "Bash(npx prettier:*)",
      "Bash(pnpm format:check:*)",
      "Bash(gh api:*)",
      "Bash(cp:*)",
      "Bash(git diff:*)",
      "Bash(pnpm --filter @designsystem/core build:*)",
      "Bash(pnpm typecheck:*)",
      "Bash(git -C /Users/lene/dev/designsystem check-ignore:*)",
      "Bash(pnpm exec prettier:*)",
      "Bash(git check-ignore:*)",
      "Bash(git -C /Users/lene/dev/designsystem/apps/lyttejeger add \"Brukerveiledning s繪k og filtre.md\")",
      "Bash(git -C /Users/lene/dev/designsystem/apps/lyttejeger commit -m \"$\\(cat <<''EOF''\ndocs\\(lyttejeger\\): Add search and filter user guide\n\nNorwegian user guide documenting:\n- Search operators \\(AND, OR, exact phrase, exclusion\\)\n- Filter options \\(language, category, year, discovery mode\\)\n- Filter combinations and limitations\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(timeout 10 npm run dev:*)",
      "Bash(timeout 5 npm run dev:*)",
      "Bash(git revert:*)",
      "Bash(git reset:*)",
      "Bash(gh repo view:*)",
      "Bash(gh secret list:*)",
      "Bash(/opt/homebrew/bin/gh secret list --repo elzacka/lyttejeger)",
      "Bash(API_KEY=\"XWX9FD2YQGMAJR9GCJTB\":*)",
      "Bash(API_SECRET=\"REtVPjWB5dgjQBsGCdGP78n8RAyRH3scycvRhxB3\")",
      "Bash(shasum:*)",
      "Bash(TIMESTAMP=\"1767564000\")",
      "Bash(pnpm --filter lyttejeger typecheck:*)",
      "Bash(node --version:*)",
      "Bash(npm:*)",
      "Bash(open http://localhost:5175)",
      "Bash(git -C /Users/lene/dev/designsystem status)",
      "Bash(git -C /Users/lene/dev/designsystem diff apps/lyttejeger/CLAUDE.md)",
      "Bash(git -C /Users/lene/dev/designsystem diff --name-only)",
      "Bash(git -C:*)",
      "Bash(source .env.local)"
    ],
    "deny": [],
    "ask": []
  }
}
